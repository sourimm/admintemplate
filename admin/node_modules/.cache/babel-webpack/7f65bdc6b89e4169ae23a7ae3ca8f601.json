{"ast":null,"code":"import _classCallCheck from \"C:/xampp/htdocs/admin/admin/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/xampp/htdocs/admin/admin/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"C:/xampp/htdocs/admin/admin/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _get from \"C:/xampp/htdocs/admin/admin/node_modules/@babel/runtime/helpers/esm/get\";\nimport _getPrototypeOf from \"C:/xampp/htdocs/admin/admin/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:/xampp/htdocs/admin/admin/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:/xampp/htdocs/admin/admin/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport { isFunction } from './util/isFunction';\nimport { empty as emptyObserver } from './Observer';\nimport { Subscription } from './Subscription';\nimport { rxSubscriber as rxSubscriberSymbol } from '../internal/symbol/rxSubscriber';\nimport { config } from './config';\nimport { hostReportError } from './util/hostReportError';\n/**\n * Implements the {@link Observer} interface and extends the\n * {@link Subscription} class. While the {@link Observer} is the public API for\n * consuming the values of an {@link Observable}, all Observers get converted to\n * a Subscriber, in order to provide Subscription-like capabilities such as\n * `unsubscribe`. Subscriber is a common type in RxJS, and crucial for\n * implementing operators, but it is rarely used as a public API.\n *\n * @class Subscriber<T>\n */\n\nexport var Subscriber = /*#__PURE__*/function (_Subscription) {\n  _inherits(Subscriber, _Subscription);\n\n  var _super = _createSuper(Subscriber);\n\n  /**\n   * @param {Observer|function(value: T): void} [destinationOrNext] A partially\n   * defined Observer or a `next` callback function.\n   * @param {function(e: ?any): void} [error] The `error` callback of an\n   * Observer.\n   * @param {function(): void} [complete] The `complete` callback of an\n   * Observer.\n   */\n  function Subscriber(destinationOrNext, error, complete) {\n    var _this;\n\n    _classCallCheck(this, Subscriber);\n\n    _this = _super.call(this);\n    /** @internal */\n\n    _this.syncErrorValue = null;\n    /** @internal */\n\n    _this.syncErrorThrown = false;\n    /** @internal */\n\n    _this.syncErrorThrowable = false;\n    _this.isStopped = false;\n\n    switch (arguments.length) {\n      case 0:\n        _this.destination = emptyObserver;\n        break;\n\n      case 1:\n        if (!destinationOrNext) {\n          _this.destination = emptyObserver;\n          break;\n        }\n\n        if (typeof destinationOrNext === 'object') {\n          // HACK(benlesh): For situations where Node has multiple copies of rxjs in\n          // node_modules, we cannot rely on `instanceof` checks\n          if (isTrustedSubscriber(destinationOrNext)) {\n            var trustedSubscriber = destinationOrNext[rxSubscriberSymbol]();\n            _this.syncErrorThrowable = trustedSubscriber.syncErrorThrowable;\n            _this.destination = trustedSubscriber;\n            trustedSubscriber.add(_assertThisInitialized(_this));\n          } else {\n            _this.syncErrorThrowable = true;\n            _this.destination = new SafeSubscriber(_assertThisInitialized(_this), destinationOrNext);\n          }\n\n          break;\n        }\n\n      default:\n        _this.syncErrorThrowable = true;\n        _this.destination = new SafeSubscriber(_assertThisInitialized(_this), destinationOrNext, error, complete);\n        break;\n    }\n\n    return _this;\n  }\n\n  _createClass(Subscriber, [{\n    key: rxSubscriberSymbol,\n    value: function value() {\n      return this;\n    }\n    /**\n     * A static factory for a Subscriber, given a (potentially partial) definition\n     * of an Observer.\n     * @param {function(x: ?T): void} [next] The `next` callback of an Observer.\n     * @param {function(e: ?any): void} [error] The `error` callback of an\n     * Observer.\n     * @param {function(): void} [complete] The `complete` callback of an\n     * Observer.\n     * @return {Subscriber<T>} A Subscriber wrapping the (partially defined)\n     * Observer represented by the given arguments.\n     * @nocollapse\n     */\n\n  }, {\n    key: \"next\",\n\n    /**\n     * The {@link Observer} callback to receive notifications of type `next` from\n     * the Observable, with a value. The Observable may call this method 0 or more\n     * times.\n     * @param {T} [value] The `next` value.\n     * @return {void}\n     */\n    value: function next(value) {\n      if (!this.isStopped) {\n        this._next(value);\n      }\n    }\n    /**\n     * The {@link Observer} callback to receive notifications of type `error` from\n     * the Observable, with an attached {@link Error}. Notifies the Observer that\n     * the Observable has experienced an error condition.\n     * @param {any} [err] The `error` exception.\n     * @return {void}\n     */\n\n  }, {\n    key: \"error\",\n    value: function error(err) {\n      if (!this.isStopped) {\n        this.isStopped = true;\n\n        this._error(err);\n      }\n    }\n    /**\n     * The {@link Observer} callback to receive a valueless notification of type\n     * `complete` from the Observable. Notifies the Observer that the Observable\n     * has finished sending push-based notifications.\n     * @return {void}\n     */\n\n  }, {\n    key: \"complete\",\n    value: function complete() {\n      if (!this.isStopped) {\n        this.isStopped = true;\n\n        this._complete();\n      }\n    }\n  }, {\n    key: \"unsubscribe\",\n    value: function unsubscribe() {\n      if (this.closed) {\n        return;\n      }\n\n      this.isStopped = true;\n\n      _get(_getPrototypeOf(Subscriber.prototype), \"unsubscribe\", this).call(this);\n    }\n  }, {\n    key: \"_next\",\n    value: function _next(value) {\n      this.destination.next(value);\n    }\n  }, {\n    key: \"_error\",\n    value: function _error(err) {\n      this.destination.error(err);\n      this.unsubscribe();\n    }\n  }, {\n    key: \"_complete\",\n    value: function _complete() {\n      this.destination.complete();\n      this.unsubscribe();\n    }\n    /** @deprecated This is an internal implementation detail, do not use. */\n\n  }, {\n    key: \"_unsubscribeAndRecycle\",\n    value: function _unsubscribeAndRecycle() {\n      var _parent = this._parent,\n          _parents = this._parents;\n      this._parent = null;\n      this._parents = null;\n      this.unsubscribe();\n      this.closed = false;\n      this.isStopped = false;\n      this._parent = _parent;\n      this._parents = _parents;\n      return this;\n    }\n  }], [{\n    key: \"create\",\n    value: function create(next, error, complete) {\n      var subscriber = new Subscriber(next, error, complete);\n      subscriber.syncErrorThrowable = false;\n      return subscriber;\n    }\n  }]);\n\n  return Subscriber;\n}(Subscription);\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\n\nvar SafeSubscriber = /*#__PURE__*/function (_Subscriber) {\n  _inherits(SafeSubscriber, _Subscriber);\n\n  var _super2 = _createSuper(SafeSubscriber);\n\n  function SafeSubscriber(_parentSubscriber, observerOrNext, error, complete) {\n    var _this2;\n\n    _classCallCheck(this, SafeSubscriber);\n\n    _this2 = _super2.call(this);\n    _this2._parentSubscriber = _parentSubscriber;\n    var next;\n\n    var context = _assertThisInitialized(_this2);\n\n    if (isFunction(observerOrNext)) {\n      next = observerOrNext;\n    } else if (observerOrNext) {\n      next = observerOrNext.next;\n      error = observerOrNext.error;\n      complete = observerOrNext.complete;\n\n      if (observerOrNext !== emptyObserver) {\n        context = Object.create(observerOrNext);\n\n        if (isFunction(context.unsubscribe)) {\n          _this2.add(context.unsubscribe.bind(context));\n        }\n\n        context.unsubscribe = _this2.unsubscribe.bind(_assertThisInitialized(_this2));\n      }\n    }\n\n    _this2._context = context;\n    _this2._next = next;\n    _this2._error = error;\n    _this2._complete = complete;\n    return _this2;\n  }\n\n  _createClass(SafeSubscriber, [{\n    key: \"next\",\n    value: function next(value) {\n      if (!this.isStopped && this._next) {\n        var _parentSubscriber = this._parentSubscriber;\n\n        if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n          this.__tryOrUnsub(this._next, value);\n        } else if (this.__tryOrSetError(_parentSubscriber, this._next, value)) {\n          this.unsubscribe();\n        }\n      }\n    }\n  }, {\n    key: \"error\",\n    value: function error(err) {\n      if (!this.isStopped) {\n        var _parentSubscriber = this._parentSubscriber;\n        var useDeprecatedSynchronousErrorHandling = config.useDeprecatedSynchronousErrorHandling;\n\n        if (this._error) {\n          if (!useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n            this.__tryOrUnsub(this._error, err);\n\n            this.unsubscribe();\n          } else {\n            this.__tryOrSetError(_parentSubscriber, this._error, err);\n\n            this.unsubscribe();\n          }\n        } else if (!_parentSubscriber.syncErrorThrowable) {\n          this.unsubscribe();\n\n          if (useDeprecatedSynchronousErrorHandling) {\n            throw err;\n          }\n\n          hostReportError(err);\n        } else {\n          if (useDeprecatedSynchronousErrorHandling) {\n            _parentSubscriber.syncErrorValue = err;\n            _parentSubscriber.syncErrorThrown = true;\n          } else {\n            hostReportError(err);\n          }\n\n          this.unsubscribe();\n        }\n      }\n    }\n  }, {\n    key: \"complete\",\n    value: function complete() {\n      var _this3 = this;\n\n      if (!this.isStopped) {\n        var _parentSubscriber = this._parentSubscriber;\n\n        if (this._complete) {\n          var wrappedComplete = function wrappedComplete() {\n            return _this3._complete.call(_this3._context);\n          };\n\n          if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n            this.__tryOrUnsub(wrappedComplete);\n\n            this.unsubscribe();\n          } else {\n            this.__tryOrSetError(_parentSubscriber, wrappedComplete);\n\n            this.unsubscribe();\n          }\n        } else {\n          this.unsubscribe();\n        }\n      }\n    }\n  }, {\n    key: \"__tryOrUnsub\",\n    value: function __tryOrUnsub(fn, value) {\n      try {\n        fn.call(this._context, value);\n      } catch (err) {\n        this.unsubscribe();\n\n        if (config.useDeprecatedSynchronousErrorHandling) {\n          throw err;\n        } else {\n          hostReportError(err);\n        }\n      }\n    }\n  }, {\n    key: \"__tryOrSetError\",\n    value: function __tryOrSetError(parent, fn, value) {\n      if (!config.useDeprecatedSynchronousErrorHandling) {\n        throw new Error('bad call');\n      }\n\n      try {\n        fn.call(this._context, value);\n      } catch (err) {\n        if (config.useDeprecatedSynchronousErrorHandling) {\n          parent.syncErrorValue = err;\n          parent.syncErrorThrown = true;\n          return true;\n        } else {\n          hostReportError(err);\n          return true;\n        }\n      }\n\n      return false;\n    }\n    /** @deprecated This is an internal implementation detail, do not use. */\n\n  }, {\n    key: \"_unsubscribe\",\n    value: function _unsubscribe() {\n      var _parentSubscriber = this._parentSubscriber;\n      this._context = null;\n      this._parentSubscriber = null;\n\n      _parentSubscriber.unsubscribe();\n    }\n  }]);\n\n  return SafeSubscriber;\n}(Subscriber);\n\nfunction isTrustedSubscriber(obj) {\n  return obj instanceof Subscriber || 'syncErrorThrowable' in obj && obj[rxSubscriberSymbol];\n}","map":{"version":3,"sources":["../../src/internal/Subscriber.ts"],"names":[],"mappings":";;;;;;;AAAA,SAAS,UAAT,QAA2B,mBAA3B;AACA,SAAS,KAAK,IAAI,aAAlB,QAAuC,YAAvC;AAEA,SAAS,YAAT,QAA6B,gBAA7B;AACA,SAAS,YAAY,IAAI,kBAAzB,QAAmD,iCAAnD;AACA,SAAS,MAAT,QAAuB,UAAvB;AACA,SAAS,eAAT,QAAgC,wBAAhC;AAEA;;;;;;;;;;;AAUA,WAAM,UAAN;AAAA;;AAAA;;AA+BE;;;;;;;;AAQA,sBAAY,iBAAZ,EACY,KADZ,EAEY,QAFZ,EAEiC;AAAA;;AAAA;;AAC/B;AAlBF;;AAAiB,UAAA,cAAA,GAAsB,IAAtB;AACjB;;AAAiB,UAAA,eAAA,GAA2B,KAA3B;AACjB;;AAAiB,UAAA,kBAAA,GAA8B,KAA9B;AAEP,UAAA,SAAA,GAAqB,KAArB;;AAgBR,YAAQ,SAAS,CAAC,MAAlB;AACE,WAAK,CAAL;AACE,cAAK,WAAL,GAAmB,aAAnB;AACA;;AACF,WAAK,CAAL;AACE,YAAI,CAAC,iBAAL,EAAwB;AACtB,gBAAK,WAAL,GAAmB,aAAnB;AACA;AACD;;AACD,YAAI,OAAO,iBAAP,KAA6B,QAAjC,EAA2C;AACzC;AACA;AACA,cAAI,mBAAmB,CAAC,iBAAD,CAAvB,EAA4C;AAC1C,gBAAM,iBAAiB,GAAG,iBAAiB,CAAC,kBAAD,CAAjB,EAA1B;AACA,kBAAK,kBAAL,GAA0B,iBAAiB,CAAC,kBAA5C;AACA,kBAAK,WAAL,GAAmB,iBAAnB;AACA,YAAA,iBAAiB,CAAC,GAAlB;AACD,WALD,MAKO;AACL,kBAAK,kBAAL,GAA0B,IAA1B;AACA,kBAAK,WAAL,GAAmB,IAAI,cAAJ,gCAAmD,iBAAnD,CAAnB;AACD;;AACD;AACD;;AACH;AACE,cAAK,kBAAL,GAA0B,IAA1B;AACA,cAAK,WAAL,GAAmB,IAAI,cAAJ,gCAAmD,iBAAnD,EAAsE,KAAtE,EAA6E,QAA7E,CAAnB;AACA;AA1BJ;;AAH+B;AA+BhC;;AAxEH;AAAA,SAEG,kBAFH;AAAA,4BAEsB;AAAK,aAAO,IAAP;AAAc;AAEvC;;;;;;;;;;;;;AAJF;AAAA;;AA0EE;;;;;;;AA1EF,yBAiFO,KAjFP,EAiFgB;AACZ,UAAI,CAAC,KAAK,SAAV,EAAqB;AACnB,aAAK,KAAL,CAAW,KAAX;AACD;AACF;AAED;;;;;;;;AAvFF;AAAA;AAAA,0BA8FQ,GA9FR,EA8FiB;AACb,UAAI,CAAC,KAAK,SAAV,EAAqB;AACnB,aAAK,SAAL,GAAiB,IAAjB;;AACA,aAAK,MAAL,CAAY,GAAZ;AACD;AACF;AAED;;;;;;;AArGF;AAAA;AAAA,+BA2GU;AACN,UAAI,CAAC,KAAK,SAAV,EAAqB;AACnB,aAAK,SAAL,GAAiB,IAAjB;;AACA,aAAK,SAAL;AACD;AACF;AAhHH;AAAA;AAAA,kCAkHa;AACT,UAAI,KAAK,MAAT,EAAiB;AACf;AACD;;AACD,WAAK,SAAL,GAAiB,IAAjB;;AACA;AACD;AAxHH;AAAA;AAAA,0BA0HkB,KA1HlB,EA0H0B;AACtB,WAAK,WAAL,CAAiB,IAAjB,CAAsB,KAAtB;AACD;AA5HH;AAAA;AAAA,2BA8HmB,GA9HnB,EA8H2B;AACvB,WAAK,WAAL,CAAiB,KAAjB,CAAuB,GAAvB;AACA,WAAK,WAAL;AACD;AAjIH;AAAA;AAAA,gCAmIqB;AACjB,WAAK,WAAL,CAAiB,QAAjB;AACA,WAAK,WAAL;AACD;AAED;;AAxIF;AAAA;AAAA,6CAyIwB;AAAA,UACZ,OADY,GACU,IADV,CACZ,OADY;AAAA,UACH,QADG,GACU,IADV,CACH,QADG;AAEpB,WAAK,OAAL,GAAe,IAAf;AACA,WAAK,QAAL,GAAgB,IAAhB;AACA,WAAK,WAAL;AACA,WAAK,MAAL,GAAc,KAAd;AACA,WAAK,SAAL,GAAiB,KAAjB;AACA,WAAK,OAAL,GAAe,OAAf;AACA,WAAK,QAAL,GAAgB,QAAhB;AACA,aAAO,IAAP;AACD;AAnJH;AAAA;AAAA,2BAgBmB,IAhBnB,EAiBmB,KAjBnB,EAkBmB,QAlBnB,EAkBwC;AACpC,UAAM,UAAU,GAAG,IAAI,UAAJ,CAAe,IAAf,EAAqB,KAArB,EAA4B,QAA5B,CAAnB;AACA,MAAA,UAAU,CAAC,kBAAX,GAAgC,KAAhC;AACA,aAAO,UAAP;AACD;AAtBH;;AAAA;AAAA,EAAmC,YAAnC;AAsJA;;;;;;IAKA,c;;;;;AAIE,0BAAoB,iBAApB,EACY,cADZ,EAEY,KAFZ,EAGY,QAHZ,EAGiC;AAAA;;AAAA;;AAC/B;AAJkB,WAAA,iBAAA,GAAA,iBAAA;AAMlB,QAAI,IAAJ;;AACA,QAAI,OAAO,iCAAX;;AAEA,QAAI,UAAU,CAAC,cAAD,CAAd,EAAgC;AAC9B,MAAA,IAAI,GAA2B,cAA/B;AACD,KAFD,MAEO,IAAI,cAAJ,EAAoB;AACzB,MAAA,IAAI,GAAyB,cAAe,CAAC,IAA7C;AACA,MAAA,KAAK,GAAyB,cAAe,CAAC,KAA9C;AACA,MAAA,QAAQ,GAAyB,cAAe,CAAC,QAAjD;;AACA,UAAI,cAAc,KAAK,aAAvB,EAAsC;AACpC,QAAA,OAAO,GAAG,MAAM,CAAC,MAAP,CAAc,cAAd,CAAV;;AACA,YAAI,UAAU,CAAC,OAAO,CAAC,WAAT,CAAd,EAAqC;AACnC,iBAAK,GAAL,CAAsB,OAAO,CAAC,WAAR,CAAoB,IAApB,CAAyB,OAAzB,CAAtB;AACD;;AACD,QAAA,OAAO,CAAC,WAAR,GAAsB,OAAK,WAAL,CAAiB,IAAjB,gCAAtB;AACD;AACF;;AAED,WAAK,QAAL,GAAgB,OAAhB;AACA,WAAK,KAAL,GAAa,IAAb;AACA,WAAK,MAAL,GAAc,KAAd;AACA,WAAK,SAAL,GAAiB,QAAjB;AAxB+B;AAyBhC;;;;yBAEI,K,EAAS;AACZ,UAAI,CAAC,KAAK,SAAN,IAAmB,KAAK,KAA5B,EAAmC;AAAA,YACzB,iBADyB,GACH,IADG,CACzB,iBADyB;;AAEjC,YAAI,CAAC,MAAM,CAAC,qCAAR,IAAiD,CAAC,iBAAiB,CAAC,kBAAxE,EAA4F;AAC1F,eAAK,YAAL,CAAkB,KAAK,KAAvB,EAA8B,KAA9B;AACD,SAFD,MAEO,IAAI,KAAK,eAAL,CAAqB,iBAArB,EAAwC,KAAK,KAA7C,EAAoD,KAApD,CAAJ,EAAgE;AACrE,eAAK,WAAL;AACD;AACF;AACF;;;0BAEK,G,EAAS;AACb,UAAI,CAAC,KAAK,SAAV,EAAqB;AAAA,YACX,iBADW,GACW,IADX,CACX,iBADW;AAAA,YAEX,qCAFW,GAE+B,MAF/B,CAEX,qCAFW;;AAGnB,YAAI,KAAK,MAAT,EAAiB;AACf,cAAI,CAAC,qCAAD,IAA0C,CAAC,iBAAiB,CAAC,kBAAjE,EAAqF;AACnF,iBAAK,YAAL,CAAkB,KAAK,MAAvB,EAA+B,GAA/B;;AACA,iBAAK,WAAL;AACD,WAHD,MAGO;AACL,iBAAK,eAAL,CAAqB,iBAArB,EAAwC,KAAK,MAA7C,EAAqD,GAArD;;AACA,iBAAK,WAAL;AACD;AACF,SARD,MAQO,IAAI,CAAC,iBAAiB,CAAC,kBAAvB,EAA2C;AAChD,eAAK,WAAL;;AACA,cAAI,qCAAJ,EAA2C;AACzC,kBAAM,GAAN;AACD;;AACD,UAAA,eAAe,CAAC,GAAD,CAAf;AACD,SANM,MAMA;AACL,cAAI,qCAAJ,EAA2C;AACzC,YAAA,iBAAiB,CAAC,cAAlB,GAAmC,GAAnC;AACA,YAAA,iBAAiB,CAAC,eAAlB,GAAoC,IAApC;AACD,WAHD,MAGO;AACL,YAAA,eAAe,CAAC,GAAD,CAAf;AACD;;AACD,eAAK,WAAL;AACD;AACF;AACF;;;+BAEO;AAAA;;AACN,UAAI,CAAC,KAAK,SAAV,EAAqB;AAAA,YACX,iBADW,GACW,IADX,CACX,iBADW;;AAEnB,YAAI,KAAK,SAAT,EAAoB;AAClB,cAAM,eAAe,GAAG,SAAlB,eAAkB;AAAA,mBAAM,MAAI,CAAC,SAAL,CAAe,IAAf,CAAoB,MAAI,CAAC,QAAzB,CAAN;AAAA,WAAxB;;AAEA,cAAI,CAAC,MAAM,CAAC,qCAAR,IAAiD,CAAC,iBAAiB,CAAC,kBAAxE,EAA4F;AAC1F,iBAAK,YAAL,CAAkB,eAAlB;;AACA,iBAAK,WAAL;AACD,WAHD,MAGO;AACL,iBAAK,eAAL,CAAqB,iBAArB,EAAwC,eAAxC;;AACA,iBAAK,WAAL;AACD;AACF,SAVD,MAUO;AACL,eAAK,WAAL;AACD;AACF;AACF;;;iCAEoB,E,EAAc,K,EAAW;AAC5C,UAAI;AACF,QAAA,EAAE,CAAC,IAAH,CAAQ,KAAK,QAAb,EAAuB,KAAvB;AACD,OAFD,CAEE,OAAO,GAAP,EAAY;AACZ,aAAK,WAAL;;AACA,YAAI,MAAM,CAAC,qCAAX,EAAkD;AAChD,gBAAM,GAAN;AACD,SAFD,MAEO;AACL,UAAA,eAAe,CAAC,GAAD,CAAf;AACD;AACF;AACF;;;oCAEuB,M,EAAuB,E,EAAc,K,EAAW;AACtE,UAAI,CAAC,MAAM,CAAC,qCAAZ,EAAmD;AACjD,cAAM,IAAI,KAAJ,CAAU,UAAV,CAAN;AACD;;AACD,UAAI;AACF,QAAA,EAAE,CAAC,IAAH,CAAQ,KAAK,QAAb,EAAuB,KAAvB;AACD,OAFD,CAEE,OAAO,GAAP,EAAY;AACZ,YAAI,MAAM,CAAC,qCAAX,EAAkD;AAChD,UAAA,MAAM,CAAC,cAAP,GAAwB,GAAxB;AACA,UAAA,MAAM,CAAC,eAAP,GAAyB,IAAzB;AACA,iBAAO,IAAP;AACD,SAJD,MAIO;AACL,UAAA,eAAe,CAAC,GAAD,CAAf;AACA,iBAAO,IAAP;AACD;AACF;;AACD,aAAO,KAAP;AACD;AAED;;;;mCACY;AAAA,UACF,iBADE,GACoB,IADpB,CACF,iBADE;AAEV,WAAK,QAAL,GAAgB,IAAhB;AACA,WAAK,iBAAL,GAAyB,IAAzB;;AACA,MAAA,iBAAiB,CAAC,WAAlB;AACD;;;;EApI6B,U;;AAuIhC,SAAA,mBAAA,CAA6B,GAA7B,EAAqC;AACnC,SAAO,GAAG,YAAY,UAAf,IAA8B,wBAAwB,GAAxB,IAA+B,GAAG,CAAC,kBAAD,CAAvE;AACD","sourcesContent":["import { isFunction } from './util/isFunction';\nimport { empty as emptyObserver } from './Observer';\nimport { Subscription } from './Subscription';\nimport { rxSubscriber as rxSubscriberSymbol } from '../internal/symbol/rxSubscriber';\nimport { config } from './config';\nimport { hostReportError } from './util/hostReportError';\n/**\n * Implements the {@link Observer} interface and extends the\n * {@link Subscription} class. While the {@link Observer} is the public API for\n * consuming the values of an {@link Observable}, all Observers get converted to\n * a Subscriber, in order to provide Subscription-like capabilities such as\n * `unsubscribe`. Subscriber is a common type in RxJS, and crucial for\n * implementing operators, but it is rarely used as a public API.\n *\n * @class Subscriber<T>\n */\nexport class Subscriber extends Subscription {\n    /**\n     * @param {Observer|function(value: T): void} [destinationOrNext] A partially\n     * defined Observer or a `next` callback function.\n     * @param {function(e: ?any): void} [error] The `error` callback of an\n     * Observer.\n     * @param {function(): void} [complete] The `complete` callback of an\n     * Observer.\n     */\n    constructor(destinationOrNext, error, complete) {\n        super();\n        /** @internal */ this.syncErrorValue = null;\n        /** @internal */ this.syncErrorThrown = false;\n        /** @internal */ this.syncErrorThrowable = false;\n        this.isStopped = false;\n        switch (arguments.length) {\n            case 0:\n                this.destination = emptyObserver;\n                break;\n            case 1:\n                if (!destinationOrNext) {\n                    this.destination = emptyObserver;\n                    break;\n                }\n                if (typeof destinationOrNext === 'object') {\n                    // HACK(benlesh): For situations where Node has multiple copies of rxjs in\n                    // node_modules, we cannot rely on `instanceof` checks\n                    if (isTrustedSubscriber(destinationOrNext)) {\n                        const trustedSubscriber = destinationOrNext[rxSubscriberSymbol]();\n                        this.syncErrorThrowable = trustedSubscriber.syncErrorThrowable;\n                        this.destination = trustedSubscriber;\n                        trustedSubscriber.add(this);\n                    }\n                    else {\n                        this.syncErrorThrowable = true;\n                        this.destination = new SafeSubscriber(this, destinationOrNext);\n                    }\n                    break;\n                }\n            default:\n                this.syncErrorThrowable = true;\n                this.destination = new SafeSubscriber(this, destinationOrNext, error, complete);\n                break;\n        }\n    }\n    [rxSubscriberSymbol]() { return this; }\n    /**\n     * A static factory for a Subscriber, given a (potentially partial) definition\n     * of an Observer.\n     * @param {function(x: ?T): void} [next] The `next` callback of an Observer.\n     * @param {function(e: ?any): void} [error] The `error` callback of an\n     * Observer.\n     * @param {function(): void} [complete] The `complete` callback of an\n     * Observer.\n     * @return {Subscriber<T>} A Subscriber wrapping the (partially defined)\n     * Observer represented by the given arguments.\n     * @nocollapse\n     */\n    static create(next, error, complete) {\n        const subscriber = new Subscriber(next, error, complete);\n        subscriber.syncErrorThrowable = false;\n        return subscriber;\n    }\n    /**\n     * The {@link Observer} callback to receive notifications of type `next` from\n     * the Observable, with a value. The Observable may call this method 0 or more\n     * times.\n     * @param {T} [value] The `next` value.\n     * @return {void}\n     */\n    next(value) {\n        if (!this.isStopped) {\n            this._next(value);\n        }\n    }\n    /**\n     * The {@link Observer} callback to receive notifications of type `error` from\n     * the Observable, with an attached {@link Error}. Notifies the Observer that\n     * the Observable has experienced an error condition.\n     * @param {any} [err] The `error` exception.\n     * @return {void}\n     */\n    error(err) {\n        if (!this.isStopped) {\n            this.isStopped = true;\n            this._error(err);\n        }\n    }\n    /**\n     * The {@link Observer} callback to receive a valueless notification of type\n     * `complete` from the Observable. Notifies the Observer that the Observable\n     * has finished sending push-based notifications.\n     * @return {void}\n     */\n    complete() {\n        if (!this.isStopped) {\n            this.isStopped = true;\n            this._complete();\n        }\n    }\n    unsubscribe() {\n        if (this.closed) {\n            return;\n        }\n        this.isStopped = true;\n        super.unsubscribe();\n    }\n    _next(value) {\n        this.destination.next(value);\n    }\n    _error(err) {\n        this.destination.error(err);\n        this.unsubscribe();\n    }\n    _complete() {\n        this.destination.complete();\n        this.unsubscribe();\n    }\n    /** @deprecated This is an internal implementation detail, do not use. */\n    _unsubscribeAndRecycle() {\n        const { _parent, _parents } = this;\n        this._parent = null;\n        this._parents = null;\n        this.unsubscribe();\n        this.closed = false;\n        this.isStopped = false;\n        this._parent = _parent;\n        this._parents = _parents;\n        return this;\n    }\n}\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nclass SafeSubscriber extends Subscriber {\n    constructor(_parentSubscriber, observerOrNext, error, complete) {\n        super();\n        this._parentSubscriber = _parentSubscriber;\n        let next;\n        let context = this;\n        if (isFunction(observerOrNext)) {\n            next = observerOrNext;\n        }\n        else if (observerOrNext) {\n            next = observerOrNext.next;\n            error = observerOrNext.error;\n            complete = observerOrNext.complete;\n            if (observerOrNext !== emptyObserver) {\n                context = Object.create(observerOrNext);\n                if (isFunction(context.unsubscribe)) {\n                    this.add(context.unsubscribe.bind(context));\n                }\n                context.unsubscribe = this.unsubscribe.bind(this);\n            }\n        }\n        this._context = context;\n        this._next = next;\n        this._error = error;\n        this._complete = complete;\n    }\n    next(value) {\n        if (!this.isStopped && this._next) {\n            const { _parentSubscriber } = this;\n            if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                this.__tryOrUnsub(this._next, value);\n            }\n            else if (this.__tryOrSetError(_parentSubscriber, this._next, value)) {\n                this.unsubscribe();\n            }\n        }\n    }\n    error(err) {\n        if (!this.isStopped) {\n            const { _parentSubscriber } = this;\n            const { useDeprecatedSynchronousErrorHandling } = config;\n            if (this._error) {\n                if (!useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                    this.__tryOrUnsub(this._error, err);\n                    this.unsubscribe();\n                }\n                else {\n                    this.__tryOrSetError(_parentSubscriber, this._error, err);\n                    this.unsubscribe();\n                }\n            }\n            else if (!_parentSubscriber.syncErrorThrowable) {\n                this.unsubscribe();\n                if (useDeprecatedSynchronousErrorHandling) {\n                    throw err;\n                }\n                hostReportError(err);\n            }\n            else {\n                if (useDeprecatedSynchronousErrorHandling) {\n                    _parentSubscriber.syncErrorValue = err;\n                    _parentSubscriber.syncErrorThrown = true;\n                }\n                else {\n                    hostReportError(err);\n                }\n                this.unsubscribe();\n            }\n        }\n    }\n    complete() {\n        if (!this.isStopped) {\n            const { _parentSubscriber } = this;\n            if (this._complete) {\n                const wrappedComplete = () => this._complete.call(this._context);\n                if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                    this.__tryOrUnsub(wrappedComplete);\n                    this.unsubscribe();\n                }\n                else {\n                    this.__tryOrSetError(_parentSubscriber, wrappedComplete);\n                    this.unsubscribe();\n                }\n            }\n            else {\n                this.unsubscribe();\n            }\n        }\n    }\n    __tryOrUnsub(fn, value) {\n        try {\n            fn.call(this._context, value);\n        }\n        catch (err) {\n            this.unsubscribe();\n            if (config.useDeprecatedSynchronousErrorHandling) {\n                throw err;\n            }\n            else {\n                hostReportError(err);\n            }\n        }\n    }\n    __tryOrSetError(parent, fn, value) {\n        if (!config.useDeprecatedSynchronousErrorHandling) {\n            throw new Error('bad call');\n        }\n        try {\n            fn.call(this._context, value);\n        }\n        catch (err) {\n            if (config.useDeprecatedSynchronousErrorHandling) {\n                parent.syncErrorValue = err;\n                parent.syncErrorThrown = true;\n                return true;\n            }\n            else {\n                hostReportError(err);\n                return true;\n            }\n        }\n        return false;\n    }\n    /** @deprecated This is an internal implementation detail, do not use. */\n    _unsubscribe() {\n        const { _parentSubscriber } = this;\n        this._context = null;\n        this._parentSubscriber = null;\n        _parentSubscriber.unsubscribe();\n    }\n}\nfunction isTrustedSubscriber(obj) {\n    return obj instanceof Subscriber || ('syncErrorThrowable' in obj && obj[rxSubscriberSymbol]);\n}\n//# sourceMappingURL=Subscriber.js.map"]},"metadata":{},"sourceType":"module"}