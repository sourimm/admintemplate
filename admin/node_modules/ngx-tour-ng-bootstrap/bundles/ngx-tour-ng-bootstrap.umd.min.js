!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common"),require("@angular/router"),require("rxjs/add/operator/filter"),require("rxjs/add/operator/first"),require("rxjs/operator/map"),require("rxjs/operator/merge"),require("rxjs/Subject"),require("@ng-bootstrap/ng-bootstrap"),require("withinviewport")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","@angular/router","rxjs/add/operator/filter","rxjs/add/operator/first","rxjs/operator/map","rxjs/operator/merge","rxjs/Subject","@ng-bootstrap/ng-bootstrap","withinviewport"],e):e(t["ngx-tour-ng-bootstrap"]={},t.ng.core,t.ng.common,t.ng.router,t.Rx.Observable.prototype,t.Rx.Observable.prototype,t.Rx.Observable.prototype,t.Rx.Observable.prototype,t.Rx,t.ngb,t.withinviewport)}(this,function(t,e,r,n,o,i,s,p,u,a,c){"use strict";c=c&&c.hasOwnProperty("default")?c["default"]:c;var h,l=this&&this.__extends||(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},function(t,e){function r(){this.constructor=t}h(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),f={OFF:0,ON:1,PAUSED:2};f[f.OFF]="OFF",f[f.ON]="ON",f[f.PAUSED]="PAUSED";var d=function(){function t(t){this.router=t,this.stepShow$=new u.Subject,this.stepHide$=new u.Subject,this.initialize$=new u.Subject,this.start$=new u.Subject,this.end$=new u.Subject,this.pause$=new u.Subject,this.resume$=new u.Subject,this.anchorRegister$=new u.Subject,this.anchorUnregister$=new u.Subject,this.events$=p.mergeStatic(s.map.bind(this.stepShow$)(function(t){return{name:"stepShow",value:t}}),s.map.bind(this.stepHide$)(function(t){return{name:"stepHide",value:t}}),s.map.bind(this.initialize$)(function(t){return{name:"initialize",value:t}}),s.map.bind(this.start$)(function(t){return{name:"start",value:t}}),s.map.bind(this.end$)(function(t){return{name:"end",value:t}}),s.map.bind(this.pause$)(function(t){return{name:"pause",value:t}}),s.map.bind(this.resume$)(function(t){return{name:"resume",value:t}}),s.map.bind(this.anchorRegister$)(function(t){return{name:"anchorRegister",value:t}}),s.map.bind(this.anchorUnregister$)(function(t){return{name:"anchorUnregister",value:t}})),this.steps=[],this.anchors={},this.status=f.OFF,this.isHotKeysEnabled=!0}return t.prototype.initialize=function(t,e){t&&t.length>0&&(this.status=f.OFF,this.steps=t.map(function(t){return Object.assign({},e,t)}),this.initialize$.next(this.steps))},t.prototype.disableHotkeys=function(){this.isHotKeysEnabled=!1},t.prototype.enableHotkeys=function(){this.isHotKeysEnabled=!0},t.prototype.start=function(){this.startAt(0)},t.prototype.startAt=function(t){var e=this;this.status=f.ON,this.goToStep(this.loadStep(t)),this.start$.next(),this.router.events.filter(function(t){return t instanceof n.NavigationStart}).first().subscribe(function(){e.currentStep&&e.hideStep(e.currentStep)})},t.prototype.end=function(){this.status=f.OFF,this.hideStep(this.currentStep),this.currentStep=undefined,this.end$.next()},t.prototype.pause=function(){this.status=f.PAUSED,this.hideStep(this.currentStep),this.pause$.next()},t.prototype.resume=function(){this.status=f.ON,this.showStep(this.currentStep),this.resume$.next()},t.prototype.toggle=function(t){t?this.currentStep?this.pause():this.resume():this.currentStep?this.end():this.start()},t.prototype.next=function(){this.hasNext(this.currentStep)&&this.goToStep(this.loadStep(this.currentStep.nextStep||this.steps.indexOf(this.currentStep)+1))},t.prototype.hasNext=function(t){return t?t.nextStep!==undefined||this.steps.indexOf(t)<this.steps.length-1:(console.warn("Can't get next step. No currentStep."),!1)},t.prototype.prev=function(){this.hasPrev(this.currentStep)&&this.goToStep(this.loadStep(this.currentStep.prevStep||this.steps.indexOf(this.currentStep)-1))},t.prototype.hasPrev=function(t){return t?t.prevStep!==undefined||this.steps.indexOf(t)>0:(console.warn("Can't get previous step. No currentStep."),!1)},t.prototype["goto"]=function(t){this.goToStep(this.loadStep(t))},t.prototype.register=function(t,e){if(this.anchors[t])throw new Error("anchorId "+t+" already registered!");this.anchors[t]=e,this.anchorRegister$.next(t)},t.prototype.unregister=function(t){delete this.anchors[t],this.anchorUnregister$.next(t)},t.prototype.getStatus=function(){return this.status},t.prototype.isHotkeysEnabled=function(){return this.isHotKeysEnabled},t.prototype.goToStep=function(t){var e=this;if(!t)return console.warn("Can't go to non-existent step"),void this.end();var r=new Promise(function(t){return t(!0)});t.route!==undefined&&"string"==typeof t.route?r=this.router.navigateByUrl(t.route):t.route&&Array.isArray(t.route)&&(r=this.router.navigate(t.route)),r.then(function(r){!1!==r&&setTimeout(function(){return e.setCurrentStep(t)})})},t.prototype.loadStep=function(t){return"number"==typeof t?this.steps[t]:this.steps.find(function(e){return e.stepId===t})},t.prototype.setCurrentStep=function(t){var e=this;this.currentStep&&this.hideStep(this.currentStep),this.currentStep=t,this.showStep(this.currentStep),this.router.events.filter(function(t){return t instanceof n.NavigationStart}).first().subscribe(function(){e.currentStep&&e.hideStep(e.currentStep)})},t.prototype.showStep=function(t){var e=this.anchors[t&&t.anchorId];if(!e)return console.warn("Can't attach to unregistered anchor with id "+t.anchorId),void this.end();e.showTourStep(t),this.stepShow$.next(t)},t.prototype.hideStep=function(t){var e=this.anchors[t&&t.anchorId];e&&(e.hideTourStep(),this.stepHide$.next(t))},t}();d.decorators=[{type:e.Injectable}],d.ctorParameters=function(){return[{type:n.Router}]};var v=function(){function t(t){this.tourService=t}return t.prototype.onEscapeKey=function(t){this.tourService.getStatus()===f.ON&&this.tourService.isHotkeysEnabled()&&this.tourService.end()},t.prototype.onArrowRightKey=function(t){this.tourService.getStatus()===f.ON&&this.tourService.hasNext(this.tourService.currentStep)&&this.tourService.isHotkeysEnabled()&&this.tourService.next()},t.prototype.onArrowLeftKey=function(t){this.tourService.getStatus()===f.ON&&this.tourService.hasPrev(this.tourService.currentStep)&&this.tourService.isHotkeysEnabled()&&this.tourService.prev()},t}();v.decorators=[{type:e.Component,args:[{selector:"tour-hotkey-listener",template:" "}]}],v.ctorParameters=function(){return[{type:d}]},v.propDecorators={onEscapeKey:[{type:e.HostListener,args:["window:keydown.Escape"]}],onArrowRightKey:[{type:e.HostListener,args:["window:keydown.ArrowRight"]}],onArrowLeftKey:[{type:e.HostListener,args:["window:keydown.ArrowLeft"]}]};var S=function(){function t(){}return t.forRoot=function(){return{ngModule:t,providers:[d]}},t}();S.decorators=[{type:e.NgModule,args:[{declarations:[v],exports:[v],imports:[r.CommonModule,n.RouterModule]}]}],S.ctorParameters=function(){return[]};var y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e}(d);y.decorators=[{type:e.Injectable}],y.ctorParameters=function(){return[]};var g=function(){return function(){}}();g.decorators=[{type:e.Injectable}],g.ctorParameters=function(){return[]};var m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e}(a.NgbPopover);m.decorators=[{type:e.Directive,args:[{selector:"[tourAnchor]"}]}],m.ctorParameters=function(){return[]};var b=function(){function t(t,e,r,n){this.tourService=t,this.tourStepTemplate=e,this.element=r,this.popoverDirective=n,this.popoverDirective.toggle=function(){}}return t.prototype.ngOnInit=function(){this.tourService.register(this.tourAnchor,this)},t.prototype.ngOnDestroy=function(){this.tourService.unregister(this.tourAnchor)},t.prototype.showTourStep=function(t){this.isActive=!0,this.popoverDirective.ngbPopover=this.tourStepTemplate.template,this.popoverDirective.popoverTitle=t.title,this.popoverDirective.container="body",this.popoverDirective.placement=(t.placement||"top").replace("before","left").replace("after","right").replace("below","bottom").replace("above","top"),t.prevBtnTitle=t.prevBtnTitle||"Prev",t.nextBtnTitle=t.nextBtnTitle||"Next",t.endBtnTitle=t.endBtnTitle||"End",this.popoverDirective.open({step:t}),t.preventScrolling||(c(this.element.nativeElement,{sides:"bottom"})?c(this.element.nativeElement,{sides:"left top right"})||this.element.nativeElement.scrollIntoView(!0):this.element.nativeElement.scrollIntoView(!1))},t.prototype.hideTourStep=function(){this.isActive=!1,this.popoverDirective.close()},t}();b.decorators=[{type:e.Directive,args:[{selector:"[tourAnchor]"}]}],b.ctorParameters=function(){return[{type:y},{type:g},{type:e.ElementRef},{type:m,decorators:[{type:e.Host}]}]},b.propDecorators={tourAnchor:[{type:e.Input}],isActive:[{type:e.HostBinding,args:["class.touranchor--is-active"]}]};var w=function(t){function e(e,r){var n=t.call(this,r)||this;return n.tourStepTemplateService=e,n.tourService=r,n}return l(e,t),e.prototype.ngAfterContentInit=function(){this.tourStepTemplateService.template=this.stepTemplate||this.defaultTourStepTemplate},e}(v);w.decorators=[{type:e.Component,args:[{encapsulation:e.ViewEncapsulation.None,selector:"tour-step-template",template:'\n    <ng-template #tourStep let-step="step">\n      <p class="tour-step-content">{{step?.content}}</p>\n      <div class="tour-step-navigation">\n        <button *ngIf="tourService.hasPrev(step)" class="btn btn-sm btn-default" (click)="tourService.prev()">« {{step?.prevBtnTitle}}</button>\n        <button *ngIf="tourService.hasNext(step)" class="btn btn-sm btn-default" (click)="tourService.next()">{{step?.nextBtnTitle}} »</button>\n        <button class="btn btn-sm btn-default" (click)="tourService.end()">{{step?.endBtnTitle}}</button>\n      </div>\n    </ng-template>\n  '}]}],w.ctorParameters=function(){return[{type:g},{type:y}]},w.propDecorators={defaultTourStepTemplate:[{type:e.ViewChild,args:["tourStep",{read:e.TemplateRef}]}],stepTemplate:[{type:e.Input},{type:e.ContentChild,args:[e.TemplateRef]}]};var x=function(){function t(){}return t.forRoot=function(){return{ngModule:t,providers:[g].concat(S.forRoot().providers,[y])}},t}();x.decorators=[{type:e.NgModule,args:[{declarations:[b,m,w],exports:[b,m,w],imports:[r.CommonModule,a.NgbPopoverModule.forRoot()]}]}],x.ctorParameters=function(){return[]},t.TourService=y,t.TourNgBootstrapModule=x,t.TourAnchorNgBootstrapDirective=b,t.TourStepTemplateComponent=w,t.ɵa=y,t.ɵb=m,t.ɵc=g,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-tour-ng-bootstrap.umd.min.js.map
