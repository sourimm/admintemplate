!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("rxjs"),require("@angular/forms")):"function"==typeof define&&define.amd?define("ng-recaptcha",["exports","@angular/core","@angular/common","rxjs","@angular/forms"],t):t((e=e||self)["ng-recaptcha"]={},e.ng.core,e.ng.common,e.rxjs,e.ng.forms)}(this,(function(e,t,n,o,r){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function i(e,t,n,o){var r,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(i<3?r(c):i>3?r(t,n,c):r(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c}function c(e,t){return function(n,o){t(n,o,e)}}Object.create;function a(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,i=n.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)c.push(o.value)}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return c}Object.create;function s(e,t,n,o,r){window.ng2recaptchaloaded=function(){t(grecaptcha)};var i=document.createElement("script");i.innerHTML="";var c=o||"https://www.google.com/recaptcha/api.js";i.src=c+"?render="+e+"&onload=ng2recaptchaloaded"+n,r&&(i.nonce=r),i.async=!0,i.defer=!0,document.head.appendChild(i)}var u=new t.InjectionToken("recaptcha-language"),p=new t.InjectionToken("recaptcha-base-url"),h=new t.InjectionToken("recaptcha-nonce-tag"),l=new t.InjectionToken("recaptcha-settings"),d=new t.InjectionToken("recaptcha-v3-site-key"),f=function(){function e(e,t,i,c,a){this.platformId=e,this.language=t,this.baseUrl=i,this.nonce=c,this.v3SiteKey=a,this.init(),this.ready=n.isPlatformBrowser(this.platformId)?r.ready.asObservable():o.of()}return r=e,e.prototype.init=function(){if(!r.ready&&n.isPlatformBrowser(this.platformId)){var e=new o.BehaviorSubject(null);r.ready=e;var t=this.language?"&hl="+this.language:"";s(this.v3SiteKey||"explicit",(function(t){return e.next(t)}),t,this.baseUrl,this.nonce)}},e.ready=null,e.ctorParameters=function(){return[{type:void 0,decorators:[{type:t.Inject,args:[t.PLATFORM_ID]}]},{type:String,decorators:[{type:t.Optional},{type:t.Inject,args:[u]}]},{type:String,decorators:[{type:t.Optional},{type:t.Inject,args:[p]}]},{type:String,decorators:[{type:t.Optional},{type:t.Inject,args:[h]}]},{type:String,decorators:[{type:t.Optional},{type:t.Inject,args:[d]}]}]},e=r=i([t.Injectable(),c(0,t.Inject(t.PLATFORM_ID)),c(1,t.Optional()),c(1,t.Inject(u)),c(2,t.Optional()),c(2,t.Inject(p)),c(3,t.Optional()),c(3,t.Inject(h)),c(4,t.Optional()),c(4,t.Inject(d))],e);var r}(),g=0,y=function(){function e(e,n,o,r){this.elementRef=e,this.loader=n,this.zone=o,this.id="ngrecaptcha-"+g++,this.resolved=new t.EventEmitter,r&&(this.siteKey=r.siteKey,this.theme=r.theme,this.type=r.type,this.size=r.size,this.badge=r.badge)}return e.prototype.ngAfterViewInit=function(){var e=this;this.subscription=this.loader.ready.subscribe((function(t){null!=t&&t.render instanceof Function&&(e.grecaptcha=t,e.renderRecaptcha())}))},e.prototype.ngOnDestroy=function(){this.grecaptchaReset(),this.subscription&&this.subscription.unsubscribe()},e.prototype.execute=function(){"invisible"===this.size&&(null!=this.widget?this.grecaptcha.execute(this.widget):this.executeRequested=!0)},e.prototype.reset=function(){null!=this.widget&&(this.grecaptcha.getResponse(this.widget)&&this.resolved.emit(null),this.grecaptchaReset())},e.prototype.expired=function(){this.resolved.emit(null)},e.prototype.captchaResponseCallback=function(e){this.resolved.emit(e)},e.prototype.grecaptchaReset=function(){var e=this;null!=this.widget&&this.zone.runOutsideAngular((function(){return e.grecaptcha.reset(e.widget)}))},e.prototype.renderRecaptcha=function(){var e=this;this.widget=this.grecaptcha.render(this.elementRef.nativeElement,{badge:this.badge,callback:function(t){e.zone.run((function(){return e.captchaResponseCallback(t)}))},"expired-callback":function(){e.zone.run((function(){return e.expired()}))},sitekey:this.siteKey,size:this.size,tabindex:this.tabIndex,theme:this.theme,type:this.type}),!0===this.executeRequested&&(this.executeRequested=!1,this.execute())},e.ctorParameters=function(){return[{type:t.ElementRef},{type:f},{type:t.NgZone},{type:void 0,decorators:[{type:t.Optional},{type:t.Inject,args:[l]}]}]},i([t.Input(),t.HostBinding("attr.id")],e.prototype,"id",void 0),i([t.Input()],e.prototype,"siteKey",void 0),i([t.Input()],e.prototype,"theme",void 0),i([t.Input()],e.prototype,"type",void 0),i([t.Input()],e.prototype,"size",void 0),i([t.Input()],e.prototype,"tabIndex",void 0),i([t.Input()],e.prototype,"badge",void 0),i([t.Output()],e.prototype,"resolved",void 0),e=i([t.Component({exportAs:"reCaptcha",selector:"re-captcha",template:""}),c(3,t.Optional()),c(3,t.Inject(l))],e)}(),b=function(){function e(){}return e=i([t.NgModule({declarations:[y],exports:[y]})],e)}(),v=function(){function e(){}return n=e,e.forRoot=function(){return n},e=n=i([t.NgModule({exports:[y],imports:[b],providers:[f]})],e);var n}(),j=function(){function e(e,t,o,r,i,c){var s=this;this.onLoadComplete=function(e){s.grecaptcha=e,s.actionBacklog&&s.actionBacklog.length>0&&(s.actionBacklog.forEach((function(e){var t=a(e,2),n=t[0],o=t[1];return s.executeActionWithSubject(n,o)})),s.actionBacklog=void 0)},this.zone=e,this.isBrowser=n.isPlatformBrowser(o),this.siteKey=t,this.nonce=i,this.language=c,this.baseUrl=r,this.init()}return Object.defineProperty(e.prototype,"onExecute",{get:function(){return this.onExecuteSubject||(this.onExecuteSubject=new o.Subject,this.onExecuteObservable=this.onExecuteSubject.asObservable()),this.onExecuteObservable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onExecuteError",{get:function(){return this.onExecuteErrorSubject||(this.onExecuteErrorSubject=new o.Subject,this.onExecuteErrorObservable=this.onExecuteErrorSubject.asObservable()),this.onExecuteErrorObservable},enumerable:!0,configurable:!0}),e.prototype.execute=function(e){var t=new o.Subject;return this.isBrowser&&(this.grecaptcha?this.executeActionWithSubject(e,t):(this.actionBacklog||(this.actionBacklog=[]),this.actionBacklog.push([e,t]))),t.asObservable()},e.prototype.executeActionWithSubject=function(e,t){var n=this;this.zone.runOutsideAngular((function(){n.grecaptcha.execute(n.siteKey,{action:e}).then((function(o){n.zone.run((function(){t.next(o),t.complete(),n.onExecuteSubject&&n.onExecuteSubject.next({action:e,token:o})}))}),(function(o){n.zone.run((function(){t.error(o),n.onExecuteErrorSubject&&n.onExecuteErrorSubject.next({action:e,error:o})}))}))}))},e.prototype.init=function(){if(this.isBrowser)if("grecaptcha"in window)this.grecaptcha=grecaptcha;else{var e=this.language?"&hl="+this.language:"";s(this.siteKey,this.onLoadComplete,e,this.baseUrl,this.nonce)}},e.ctorParameters=function(){return[{type:t.NgZone},{type:String,decorators:[{type:t.Inject,args:[d]}]},{type:void 0,decorators:[{type:t.Inject,args:[t.PLATFORM_ID]}]},{type:String,decorators:[{type:t.Optional},{type:t.Inject,args:[p]}]},{type:String,decorators:[{type:t.Optional},{type:t.Inject,args:[h]}]},{type:String,decorators:[{type:t.Optional},{type:t.Inject,args:[u]}]}]},e=i([t.Injectable(),c(1,t.Inject(d)),c(2,t.Inject(t.PLATFORM_ID)),c(3,t.Optional()),c(3,t.Inject(p)),c(4,t.Optional()),c(4,t.Inject(h)),c(5,t.Optional()),c(5,t.Inject(u))],e)}(),m=function(){function e(){}return e=i([t.NgModule({providers:[j]})],e)}(),x=function(){function e(e){this.host=e}return n=e,e.prototype.writeValue=function(e){e||this.host.reset()},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.onResolve=function(e){this.onChange&&this.onChange(e),this.onTouched&&this.onTouched()},e.ctorParameters=function(){return[{type:y}]},i([t.HostListener("resolved",["$event"])],e.prototype,"onResolve",null),e=n=i([t.Directive({providers:[{multi:!0,provide:r.NG_VALUE_ACCESSOR,useExisting:t.forwardRef((function(){return n}))}],selector:"re-captcha[formControlName],re-captcha[formControl],re-captcha[ngModel]"})],e);var n}(),I=function(){function e(){}return e=i([t.NgModule({declarations:[x],exports:[x],imports:[r.FormsModule,b]})],e)}();e.RECAPTCHA_BASE_URL=p,e.RECAPTCHA_LANGUAGE=u,e.RECAPTCHA_NONCE=h,e.RECAPTCHA_SETTINGS=l,e.RECAPTCHA_V3_SITE_KEY=d,e.ReCaptchaV3Service=j,e.RecaptchaComponent=y,e.RecaptchaFormsModule=I,e.RecaptchaLoaderService=f,e.RecaptchaModule=v,e.RecaptchaV3Module=m,e.RecaptchaValueAccessorDirective=x,e.Éµa=b,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ng-recaptcha.umd.min.js.map